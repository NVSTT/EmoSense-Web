<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –æ–Ω–ª–∞–π–Ω</title>
<link rel="stylesheet" href="/static/css/styles.css">
<script src="/static/js/scripts.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>üß† –¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –æ–Ω–ª–∞–π–Ω</h1>
        <p>–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç ‚Äî –ò–ò –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –µ–≥–æ —ç–º–æ—Ü–∏–∏!</p>

        <form method="POST">
            <textarea name="post" placeholder="–ü—Ä–∏–º–µ—Ä: –í —Ç–æ–º–ª–µ–Ω—å—è—Ö –≥—Ä—É—Å—Ç–∏ –±–µ–∑–Ω–∞–¥–µ–∂–Ω–æ–π...">{{ request.form.get('post', '') }}</textarea><br>
            
            <div class="toggle-switch">
                <input type="radio" id="objective" name="analysis_type" value="objective" {{ 'checked' if analysis_type == 'objective' else '' }}>
                <label for="objective">–û–±—ä–µ–∫—Ç–∏–≤–Ω–æ (RuBERT)</label>
                <input type="radio" id="subjective" name="analysis_type" value="subjective" {{ 'checked' if analysis_type == 'subjective' else '' }}>
                <label for="subjective">–°—É–±—ä–µ–∫—Ç–∏–≤–Ω–æ (LLM)</label>
            </div>
            
            <button type="submit">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç</button>
        </form>

        <div class="note" id="note">
            {% if analysis_type == 'objective' %}
                üí° –°–æ–≤–µ—Ç: –∏—Å–ø–æ–ª—å–∑—É–π —Ñ—Ä–∞–∑—ã –≤—Ä–æ–¥–µ "I'm happy", "This is terrible", "It's okay" - –æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å RuBERT (–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥)
            {% else %}
                üí° –°–æ–≤–µ—Ç: –ø–∏—à–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫ - —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å LLM (—á–µ–ª–æ–≤–µ–∫–æ–ø–æ–¥–æ–±–Ω—ã–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è)
            {% endif %}
        </div>

        <div class="loader" id="loader" style="display: none;">
            <div class="spinner"></div>
            <p>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç...</p>
        </div>


        {% if result %}
        <div class="result {{ result.sentiment }}">
            <strong>–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:</strong> {{ result.sentiment_text }}<br><br>
            <div class="emotion-bars">
                <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–π:</h3>
                {% for emotion, score in result.emotion_data.items() %}
                <div class="emotion-bar">
                    <span>{{ emotion.capitalize() }}: {{ "%.1f"|format(score * 100) }}%</span>
                    <div class="progress-bar">
                        <div class="progress-fill {{ emotion }}-fill" data-width="{{ (score * 100) }}"></div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <strong>–í–∞—à –ø–æ—Å—Ç:</strong><br>"<em>{{ result.post }}</em>"<br>
            <p></p>
            <strong>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ò–ò:</strong> {{ result.comment }}<br><br>
            <strong>–ü–æ—è—Å–Ω–µ–Ω–∏–µ:</strong> {{ result.explanation }}
        </div>
        <div class="full-reasoning">
            <strong>–ú–Ω–µ–Ω–∏–µ –ò–ò:</strong>
            <p>{{ result.full_reasoning }}</p>
        </div>
        {% endif %}
    </div>
</body>
</html>